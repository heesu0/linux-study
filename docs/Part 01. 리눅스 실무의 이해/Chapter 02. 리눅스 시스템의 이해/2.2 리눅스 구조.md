---
id: 2.2 리눅스 구조
---

## 파일(Fiie)
- 의미 있는 정보를 담고 있는 컴퓨터 저장 장치 상의 논리적인 단위
- 파일 이름으로 식별되는 데이터 리소스

### 리눅스 파일 종류
- 일반 파일
  - 실행 파일, 텍스트 파일, 이미지 파일 등 일반적인 데이터를 저장하는 파일
- 디렉터리(Directory) 파일
  - 파일들을 보관하는 파일
- 심볼릭 링크(Symbolic Link) 파일
  - 원본 파일을 가리키고 있는 파일 (Windows의 바로가기와 유사)
- 디바이스 파일
  - 하드웨어 장치를 추상화한 파일
  - 문자 디바이스(Character Device) 파일 : 한 번에 한 문자씩 데이터를 전송하는 디바이스(키보드, 마우스 등)를 관리하는 파일 
  - 블록 디바이스(Block Device) 파일 : 블록 단위로 데이터를 전송하는 디바이스(디스크, USB 등)를 관리하는 파일 
- 통신 파일
  - 통신을 추상화한 파일
  - 소켓(Socket) 파일 : 네트워크 통신 혹은 프로세스 간 통신(IPC, Inter-Process Communication)을 관리하는 파일 
  - 명명된 파이프(Named Pipe) 파일 : FIFO(First In First Out) 방식의 프로세스 간 통신을 관리하는 파일

### Inode(Index Node)
- Unix-like 파일 시스템에서 파일 객체를 설명하는 자료구조
- 파일 객체 속성(번호, 파일 종류, 파일 크기, 접근 모드, 소유자 정보, 타임스탬프 등) 및 디스크 블록 위치를 저장하고 있음
- 리눅스 파일은 각각 하나의 inode를 할당받아 관리됨

<br/>

## 디렉토리(Directory)
- 파일들을 보관(분류)하기 위한 이름공간(namespace) 파일
- 디렉토리에 보관된 파일들과 하위 디렉토리에 대한 정보를 저장
- GUI 환경에서는 폴더(folder)라고 부름

### 리눅스 디렉토리 구조
<img width="600" alt="image" src="https://github.com/heesu0/linux-study/assets/34677157/b34194da-35af-4228-9a23-f923d6f2bba0" />

- 최상위 루트 디렉토리(`/`)를 중심으로 다수의 하위 디렉토리가 존재하는 계층적 트리(tree) 구조 

### 리눅스 디렉토리 종류
- `/` : 루트 디렉터리
- `/boot` : 부팅 이미지 파일, 커널 등 시스템 부팅 시 필요한 파일들이 들어있는 디렉터리
- `/dev` : 디바이스 파일들이 들어있는 디렉터리
- `/etc` : 시스템 환경 설정 파일 및 부팅에 관련된 스크립트 파일들이 들어있는 디렉터리
- `/root` : 루트 사용자들이 사용할 수 있는 홈 디렉터리
- `/home` : 개인 사용자들이 사용할 수 있는 홈 디렉터리
- `/usr` : 시스템 운영에 필요한 명령어, 응용 프로그램 파일들이 들어있는 디렉터리
- `/lib`, `/lib64` : 32/64bits 라이브러리 파일들이 들어있는 디렉터리 (최근에는 `/usr/lib`, `/usr/lib64`의 심볼릭 링크로 존재)
- `/mnt`, `/media`, `/net` : 물리적인 장치(디스크, USB 등)를 특정한 위치로 연결(마운트)한 디렉터리
- `/bin` : 일반적인 명령어 파일들이 들어있는 디렉터리 (최근에는 `/usr/bin`의 심볼릭 링크로 존재)
- `/sbin` : 시스템 관리에 필요한 명령어 파일들이 들어있는 디렉터리 (최근에는 `/usr/sbin`의 심볼릭 링크로 존재)
- `/proc` : 시스템에서 운영되고 있는 프로세스 상태 정보, 하드웨어 정보, 기타 시스템 정보 등이 들어있는 디렉터리
- `/var` : 시스템 운영 로그 파일 혹은 나중에 처리할 데이터를 저장한 스풀링(Spooling) 파일들이 들어있는 디렉터리
- `/opt` : 일부 선택적인 프로그램 및 패키지 파일들이 들어있는 디렉터리
- `/tmp` : 각종 프로그램 작업 과정에서 생성되는 파일들을 임시로 저장하는 디렉터리
- `/srv` : 사이트에서 생성되는 데이터를 저장하는 디렉터리
- `/sys` : Hot Plug 장치(부팅 이후 연결/분리할 수 있는 장치) 정보를 저장하는 디렉터리
- `/run` : 부팅 이후 동작중인 프로세스의 런타임 데이터를 저장하는 디렉터리

<br/>

## 파일 시스템(File System)
- 컴퓨터 저장 장치에서 데이터를 관리하기 위해 운영체제가 구성하는 파일, 디렉토리 기반 시스템
- 디스크를 일정한 크기(파티션)로 분할한 후, 포맷(format)하여 고유한 파일 시스템을 구축할 수 있음
- 루트 파일 시스템(`/`)에 다른 파일 시스템을 연결(마운트)해서 사용할 수 있음

### 리눅스 파일 시스템 역할
- 데이터 구성 및 검색
  - 데이터를 계층적인 파일, 디렉터리 구조로 구성하여 효율적으로 데이터를 검색
- 데이터 저장 및 무결성
  - 데이터의 저장 과정에서 무결성(정확성, 완전성, 일관성)을 보장
- 접근 제어 및 보안
  - 파일 접근 권한을 제어하여 데이터를 보호
- 공간 관리 및 성능 최적화
  - 데이터 저장 및 삭제를 위해 공간을 할당 및 회수하며 파일의 단편화(fragmentation)를 줄이기 위한 최적화 작업을 수행
- 백업 및 복구
  - 백업(backup) 및 저널링(journaling) 기능을 사용하여 데이터 손실과 파괴를 방지

> 저널링 파일 시스템(Journaling File System) : 파일 시스템의 변경 사항을 반영하기 전에 로그(저널)에 먼저 저장하여 문제가 발생해도 변경 사항을 추적하고 복구할 수 있는 파일 시스템

### 리눅스 파일 시스템 구조

<img width="600" alt="image" src="https://github.com/heesu0/linux-study/assets/34677157/510cec7b-cf28-414e-9d31-c7a5654e61fa" />

- Boot Block(Boot Sector) : 운영체제를 부팅하기 위한 부트로더(BootLoader)
- Super Block : 파일 시스템에 대한 메타데이터(파일 시스템 크기, 블록 크기, inode 개수 등)
- Inode List(Table) : Inode의 목록(테이블)
- Data Block Reference : 실제 블록을 가리키는 포인터
- Directory List Table : Inode 번호와 파일 이름이 매핑된 테이블

> 블록(Block) : 파일 시스템에서 데이터를 저장하는 단위(I/O 작업 단위)로 1KB ~ 8KB 크기를 가짐

<br/>

## 리눅스 파일 시스템 종류

> 자세한 파일 시스템 스펙 비교는 [Comparison of file systems](https://en.wikipedia.org/wiki/Comparison_of_file_systems) 참고

> 자세한 ext2, ext3, ext4 설명은 [File systems ext2, ext3 and ext4](https://students.mimuw.edu.pl/ZSO/Wyklady/11_extXfs/extXfs_short.pdf) 참고

### ext2
- 초기 리눅스에서 사용한 ext(extended filesystem)를 확장한 파일 시스템
  - 파일 이름 최대 크기 : 255bytes
  - 단일 파일 최대 크기 : 16GiB ~ 2TiB
  - 파일 시스템 최대 크기 : 2TiB ~ 32TiB
- 데이터 안정성이 낮음
  - 저널링 기능이 없어 데이터 유실이 발생할 수 있음
  - 대신 저널링 데이터를 기록하지 않아도 되기 때문에 ext3보다 쓰기 성능이 좋음 (약 20% 향상)
- 시스템이 다운된 경우, 복구(재부팅) 과정에서 전체 파일 시스템을 검사하는 프로그램(e2fsck) 실행이 강제됨
- 압축과 암호화를 지원하지 않음

### ext3
- ext2를 확장한 저널링 파일 시스템
  - 파일 이름 최대 크기 : 255bytes
  - 단일 파일 최대 크기 : 16GiB ~ 2TiB
  - 파일 시스템 최대 크기 : 2TiB ~ 32TiB
- 저널링 기능이 제공되면서 데이터 안정성과 복구 속도를 높임

### ext4
- ext3을 확장한 저널링 파일 시스템
  - 파일 이름 최대 크기 : 255bytes
  - 단일 파일 최대 크기 : 16GiB ~ 16TiB
  - 파일 시스템 최대 크기 : 1EiB
- 대규모 파일 시스템을 지원함

### XFS
- SGI(Silicon Graphics, Inc)에서 개발한 고성능 64bits 저널링 파일 시스템
  - 파일 이름 최대 크기 : 255bytes
  - 단일 파일 최대 크기 : 8EiB
  - 파일 시스템 최대 크기 : 8EiB 
- 대규모 데이터 저장과 고성능 작업에 적합하게 설계됨

<br/>

## 부트 매니저(Boot Manager)
- 운영체제가 로드되기 전에 실행되어 원하는 운영체제를 부팅할 수 있도록 도와주는 소프트웨어
- MBR(Master Boot Record) 혹은 EFI 파티션(Partition)에 저장됨
- 부트로더(BootLoader)라고도 부름

### LILO(Linux Loader)
- 리눅스 초기에 사용하던 부트 매니저
- 파일 시스템을 지원하지 않아 설정을 변경하려는 경우, 다시 실행해야 함

### GRUB(Grand Unified BootLoader)
- GNU 프로젝트에서 개발한 부트 매니저
  - 다양한 파일 시스템을 지원
  - 명령 인터페이스를 통한 동적 부팅 지원
  - 다양한 운영체제를 부팅할 수 있는 멀티 부팅 지원
- 대부분의 리눅스 배포판에서 기본 부트 매니저로 사용됨

<br/>
