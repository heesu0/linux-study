---
id: 2.4 셸
---

## 셸(Shell)

- 사용자(응용 프로그램)가 커널을 사용할 수 있도록 인터페이스 환경(CLI, GUI)를 제공하는 시스템 소프트웨어
- 사용자로부터 명령을 받아 해석하고 프로그램을 실행하는 역할을 수행
- 사용자가 시스템에 로그인하면 각 사용자에게 설정된 셸을 부여하는 방식으로 보안성을 높임

<br/>

## 셸 종류
- sh (Bourne Shell)
  - 최초의 유닉스 셸
- csh (C Shell)
  - C 언어를 기반으로 만들어진 셸 (history, alias 등 기능 추가)
- ksh (Korn Shell)
  - sh를 개선한 셸 (history, alias, vi 편집 등 기능 추가)
- bash (Bourne Again Shell)
  - sh를 확장한 리눅스 표준 셸 (csh, ksh 기능을 포함하여 다양한 기능 추가)
- zsh (Z shell)
  - bash에서 다양한 기능을 추가한 셸 (플러그인, 테마 제공)

<br/>

## 셸 변수 및 환경 변수
- 셸 변수
  - 특정한 셸에서만 적용되는 변수
- 환경 변수
  - 셸의 환경을 정의하는 변수 (대문자로 구성됨)

```bash
# 셸 변수 적용
$ variable=value

# 셸 변수를 하위 프로세스 및 하위 셸에도 적용
$ export variable=value

# 현재 셸에 적용된 특정 셸 변수 확인
$ echo $variable

# 현재 셸에 적용된 모든 셸 변수 확인
$ set

# 현재 셸에 적용된 모든 환경 변수 확인
$ env
```

<br/>

## 셸 주요 기능

### 히스토리(history) 기능
- 셸에 입력 후 실행했던 모든 명령들을 출력하는 기능 (명령들은 히스토리 버퍼에 스택으로 저장되어 있음)

```bash
# 셸에 입력 후 실행했던 명령어 목록 출력
$ history

# 최근에 입력한 마지막 5개 명령어 목록 출력
$ history 5
```

### 엘리어스(alias) 기능
- 특정한 명령을 별명으로 지정하여 사용하는 기능

```bash
# alias 지정
$ alias c='clear'

# alias 해제
$ unalias c
```

### 그룹 명령 기능
- 하나의 명령 행에 여러 개의 명령어를 동시에 사용하는 기능
  - `;` : 입력한 순서대로 순차적으로 명령 실행
  - `||` : 앞의 명령이 성공이면 결과를 출력하고 실패하면 뒤의 명령을 실행하여 결과를 출력 (OR)
  - `&&` : 앞의 명령이 성공해야만 뒤의 명령을 수행 (AND)

```bash
$ ls ; sleep 10

$ ls || sleep 10

$ ls && sleep 10
```


### 리다이렉션(redirection) 
- 특정 프로세스의 입/출력을 표준 입출력이 아닌 지정한 입출력으로 변경할 때 사용하는 기능
  - `>` : 프로세스의 출력을 표준 출력(모니터)에서 지정한 출력으로 변경
  - `>>` : 프로세스의 출력을 표준 출력(모니터)에서 지정한 출력에 추가
  - `<` : 프로세스의 입력을 표준 입력(키보드)에서 지정한 입력으로 변경
  - `<<` : 프로세스의 입력을 표준 입력(키보드)에서 지정한 입력으로 변경 (기호 뒤에 있는 문자열을 구분 문자(delimiter)로 사용하여 구문 문자가 나오기 전까지 계속 입력)
- 출력 결과를 파일로 저장하거나 파일의 내용을 프로세스의 입력으로 사용하기 위한 목적


``` bash
# cat 명령어 출력을 표준 출력(모니터) 대신 log.txt 파일로 저장 (이미 파일이 있으면 덮어씌움)
$ cat > log.txt

# cat 명령어 출력을 표준 출력(모니터) 대신 log.txt 파일에 추가
$ cat >> log.txt

# 표준 입력(키보드) 대신 log.txt 파일 내용을 cat 명령어 입력으로 사용
$ cat < log.txt

# 표준 입력(키보드) 대신 EOF가 나오기 전까지 입력한 문자열을 cat 명령어 입력으로 사용
$ cat << EOF
Line 1 of text
Line 2 of text
EOF
```

### 파이프(pipe) 기능
- 프로세스의 표준 출력을 다른 프로세스의 표준 입력으로 사용하는 기능
  - `명령어1 | 명령어2` : 명령어1의 결과값이 명령어2의 입력으로 사용
  - `명령어1 | tee 명령어2 | 명령어3` : 명령어1의 결과값을 두 갈래로 나눠 명령어2와 명령어3의 입력으로 사용 
  - `명령어1 | xargs 명령어2` : 명령어1의 결과값을 명령어2의 명령 인자로 사용
- 프로세스간 통신 목적으로도 사용

```bash
# ls 결과를 sort를 통해 정렬하고 more를 통해 화면에 출력
$ ls | sort | more

# ls -l 결과를 list.txt 파일에 기록함과 동시에 more를 통해 화면에 출력
$ ls -l | tee list.txt | more

# 현재 디렉토리에서 .txt로 끝나는 파일이나 디렉토리를 찾아 전부 삭제
$ find -name '*.txt' | xargs rm -rf
```

<br/>

## 셸 프로그래밍
- 셸에서 사용되는 여러 명령어들을 모아 하나의 파일로 만드는 과정

> 자세한 문법은 [https://mug896.github.io/bash-shell/index.html](https://mug896.github.io/bash-shell/index.html) 참고


